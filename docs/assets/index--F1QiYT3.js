(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function i(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(s){if(s.ep)return;s.ep=!0;const u=i(s);fetch(s.href,u)}})();const re=e=>{const c=document.createElement("div");c.className="board";const s=(u,l)=>{const d=document.createElement("div");d.className="block";const g=u*3,S=l*3;let A=document.createElement("div");for(let O=0;O<3;O++){A=document.createElement("div"),A.className="row";let U=document.createElement("div");for(let F=0;F<3;F++){const Y=g+F,J=S+O,V=e[3*3*J+Y];U=document.createElement("div"),U.className="cell",U.innerText=V?`${V}`:" ",A.append(U)}d.append(A)}return d};for(let u=0;u<3;u++){const l=document.createElement("div");l.className="band";for(let d=0;d<3;d++){const g=s(d,u);l.append(g)}c.append(l)}return c},h=9,j=[1,2,3,4,5,6,7,8,9],ee=new Array(9).fill(null),B="easy",N="medium",P="hard",x="expert",te="master",X=(e,t)=>{for(let i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},Pe=e=>{const t=[[],[],[]],i=Math.sqrt(e);for(let c=0;c<e;c++){const s=[],u=[],l=[];for(let d=0;d<e;d++)if(s.push(e*c+d),u.push(e*d+c),d<i)for(let g=0;g<i;g++){const S=Math.floor(c/i)*e*i,A=c%i*i,O=S+A;l.push(O+e*d+g)}t[0].push(s),t[1].push(u),t[2].push(l)}return t},G=e=>new Array(h*h).fill(null).every((t,i)=>e[i].value!==null),He=(e,t)=>{switch(t){case B:return!0;case N:return e!==B;case P:return e!==B&&e!==N;case x:return e!==B&&e!==N&&e!==P;case te:return e!==B&&e!==N&&e!==P&&e!==x}},xe=(e,t)=>{switch(e){case B:return!0;case N:return t!==B;case P:return t!==B&&t!==N;case x:return t!==B&&t!==N&&t!==P;case te:return t!==B&&t!==N&&t!==P&&t!==x}},Ye=e=>{switch(e){case B:return h*h-30;case N:return h*h-20;default:return h*h-17}},w=(e,t,i)=>{e[t].value=i,i!==null&&(e[t].candidates=ee.slice())},Ve=e=>{const t=Math.floor(Math.random()*e.length);return e[t]},K=(e,t)=>{const i=e.filter(Boolean),c=i.reduce((u,l,d)=>{const g=t[d];return u+l*g.score},0);let s=i.length<3?B:i.length<4?N:P;return c>750&&(s=x),c>2e3&&(s=te),{difficulty:s,score:c}},_=Pe(h);function ie(e={}){const{onError:t,onUpdate:i,onFinish:c,initBoard:s,difficulty:u=N}=e;let l=[],d=[];const g=()=>{l=new Array(h*h).fill(null).map((n,o)=>Object.assign(Object.assign({},l[o]),{candidates:l[o].value==null?j.slice():l[o].candidates}))},S=[{postFn:M,title:"Open Singles Strategy",fn:Se,score:.1,type:"value"},{postFn:M,title:"Visual Elimination Strategy",fn:Te,score:9,type:"value"},{postFn:M,title:"Single Candidate Strategy",fn:De,score:8,type:"value"},{title:"Naked Pair Strategy",fn:be,score:50,type:"elimination"},{title:"Pointing Elimination Strategy",fn:Ie,score:80,type:"elimination"},{title:"Hidden Pair Strategy",fn:_e,score:90,type:"elimination"},{title:"Naked Triplet Strategy",fn:Le,score:100,type:"elimination"},{title:"Hidden Triplet Strategy",fn:Be,score:140,type:"elimination"},{title:"Naked Quadruple Strategy",fn:Ae,score:150,type:"elimination"},{title:"Hidden Quadruple Strategy",fn:Oe,score:280,type:"elimination"}],A=()=>{l[0]!==null&&typeof l[0]=="object"||(l=Array.from({length:h*h},(o,r)=>{var a;const p=(a=s==null?void 0:s[r])!==null&&a!==void 0?a:null,m=p==null?[...j]:[...ee];return{value:p,candidates:m}}))},O=(n,o)=>{const r=[];for(let a=0;a<n.length;a++){const p=l[n[a]].candidates;for(let m=0;m<o.length;m++){const f=o[m];f&&p[f-1]!==null&&(p[f-1]=null,r.push({index:n[a],eliminatedCandidate:f}))}}return r},U=n=>{const o=Math.sqrt(h),r=[],a=Math.floor(n/h);r.push(a);const p=Math.floor(n%h);r.push(p);const m=Math.floor(a/o)*o+Math.floor(p/o);return r.push(m),r},F=n=>{const o=Y(n);return j.filter(r=>!o.includes(r))},Y=n=>n.map(o=>l[o].value).filter(Boolean),J=n=>l[n].candidates.filter(o=>o!==null),V=(n,o)=>o.filter(r=>l[r].candidates.includes(n));function Se(){const n=_;for(let o=0;o<n.length;o++)for(let r=0;r<h;r++){const a=Ce(n[o][r]);if(a)return ye(a);if(G(l))return c==null||c(K(d,S)),!0}return!1}function Ce(n){const o=[];for(let r=0;r<h;r++){const a=n[r];if(l[a].value==null&&(o.push({house:n,cellIndex:a}),o.length>1))break}return o.length===1?o[0]:null}function ye(n){const o=F(n.house);return o.length>1?(t==null||t({message:"Board Incorrect"}),-1):(w(l,n.cellIndex,o[0]),[{index:n.cellIndex,filledValue:o[0]}])}function M(){const n=_.length;for(let o=0;o<n;o++)for(let r=0;r<h;r++){const a=_[o][r],p=Y(a);for(let m=0;m<h;m++){const f=l[a[m]];f.candidates=f.candidates.filter(E=>!p.includes(E))}}return!1}const oe=n=>new Array(h*h).fill(null).map((o,r)=>{const a=n[r]||null,p=a===null?[...j]:[...ee];return{value:a,candidates:p}});function De(){const n=_.length;for(let o=0;o<n;o++)for(let r=0;r<h;r++){const a=_[o][r],p=F(a);for(let m=0;m<p.length;m++){const f=p[m],E=[];for(let T=0;T<h;T++){const L=a[T],C=l[L];if(X(C.candidates,f)&&(E.push(L),E.length>1))break}if(E.length===1){const T=E[0];return w(l,T,f),[{index:T,filledValue:f}]}}}return!1}function Te(){for(let n=0;n<l.length;n++){const r=l[n].candidates,a=[];for(let p=0;p<r.length&&(r[p]!==null&&a.push(r[p]),!(a.length>1));p++);if(a.length===1){const p=a[0];return w(l,n,p),[{index:n,filledValue:p}]}}return!1}function Ie(){const n=_.length;for(let o=0;o<n;o++)for(let r=0;r<h;r++){const a=_[o][r],p=F(a);for(let m=0;m<p.length;m++){const f=p[m];let E=!0,T=-1,L=-1,C=!0;const I=[];for(let b=0;b<a.length;b++){const D=a[b];if(X(l[D].candidates,f)){const y=U(D),H=o===2?y[0]:y[2],R=o===2?y[1]:y[2];if(I.length>0&&(H!==T&&(E=!1),L!==R&&(C=!1),E===!1&&C===!1))break;T=H,L=R,I.push(D)}}if((E||C)&&I.length>0){const b=o===2?E?0:1:2,D=_[b][U(I[0])[b]],y=[];for(let R=0;R<D.length;R++)I.includes(D[R])||y.push(D[R]);const H=O(y,[f]);if(H.length>0)return H}}}return!1}function z(n){let o=[],r=[-1];const a=_.length;for(let m=0;m<a;m++)for(let f=0;f<h;f++){const E=_[m][f];if(F(E).length<=n)continue;o=[],r=[-1];const T=p(E,0);if(T!==!1)return T}return!1;function p(m,f){for(let E=Math.max(f,r[f]);E<h-n+f;E++){r[f]=E+1,r[f+1]=E+1;const T=m[E],L=J(T);if(!(L.length===0||L.length>n)){if(o.length>0){const C=[...L];for(let I=0;I<o.length;I++){const b=o[I].candidates||[];for(let D=0;D<b.length;D++)C.includes(b[D])||C.push(b[D])}if(C.length>n)continue}if(o.push({cell:T,candidates:L}),f<n-1){const C=p(m,f+1);if(C!==!1)return C}if(o.length===n){const C=[];let I=[];for(let y=0;y<o.length;y++)C.push(o[y].cell),I=I.concat(o[y].candidates||[]);const b=m.filter(y=>!C.includes(y)),D=O(b,I);if(D.length>0)return D}}}return f>0&&o.length>f-1&&o.pop(),!1}}function be(){return z(2)}function Le(){return z(3)}function Ae(){return z(4)}function W(n){let o=[],r=[-1];function a(m,f){for(let E=Math.max(f,r[f]);E<=h-n+f;E++){r[f]=E+1,r[f+1]=E+1;const T=E+1,L=V(T,m);if(!(L.length===0||L.length>n)){if(o.length>0){const C=L.slice();for(let I=0;I<o.length;I++){const b=o[I].cells;for(let D=0;D<b.length;D++)X(C,b[D])||C.push(b[D])}if(C.length>n)continue}if(o.push({candidate:T,cells:L}),f<n-1){const C=a(m,f+1);if(C!==!1)return C}if(o.length===n){const C=[];let I=[];for(let y=0;y<o.length;y++)C.push(o[y].candidate),I=I.concat(o[y].cells);const b=[];for(let y=0;y<h;y++)X(C,y+1)||b.push(y+1);const D=O(I,b);if(D.length>0)return D}}}return f>0&&o.length>f-1&&o.pop(),!1}const p=_.length;for(let m=0;m<p;m++)for(let f=0;f<h;f++){const E=_[m][f];if(F(E).length<=n)continue;o=[],r=[-1];const T=a(E,0);if(T!==!1)return T}return!1}function _e(){return W(2)}function Be(){return W(3)}function Oe(){return W(4)}const q=({strategyIndex:n=0,analyzeMode:o=!1}={})=>{var r,a;if(G(l))return o||c==null||c(K(d,S)),!1;const p=S[n].fn();return(a=(r=S[n]).postFn)===null||a===void 0||a.call(r),p===!1?S.length>n+1?q({strategyIndex:n+1,analyzeMode:o}):(t==null||t({message:"No More Strategies To Solve The Board"}),!1):p===-1?!1:(o||i==null||i({strategy:S[n].title,updates:p,type:S[n].type}),typeof d[n]>"u"&&(d[n]=0),d[n]+=1,S[n].type)},Ne=n=>{M();const o=l[n].invalidCandidates||[],r=l[n].candidates.filter(p=>!!p&&!o.includes(p));if(r.length===0)return!1;const a=Ve(r);return w(l,n,a),!0},Fe=n=>{var o;const r=n-1;l[r].invalidCandidates=l[r].invalidCandidates||[],(o=l[r].invalidCandidates)===null||o===void 0||o.push(l[r].value),w(l,r,null),g(),l[n].invalidCandidates=[],Q(r)},Q=n=>{if(n+1>h*h)return l.forEach(o=>o.invalidCandidates=[]),!0;Ne(n)?Q(n+1):Fe(n)};function Ue(n,o){return n.hasSolution&&n.difficulty&&n.hasUniqueSolution&&He(o,n.difficulty)}const ke=()=>{const n=Array.from({length:h*h},(r,a)=>a);let o=Ye(u);for(;o>0&&n.length>0;){const r=Math.floor(Math.random()*n.length),a=n.splice(r,1)[0],p=l[a].value;w(l,a,null),g();const m=$();Ue(m,u)?o--:w(l,a,p)}};function Me(n,o){return n.map((r,a)=>o[a]!==void 0?{title:r.title,freq:o[a]}:null).filter(Boolean)}function $(){let n=d.slice(),o=JSON.parse(JSON.stringify(l)),r=!0;for(;r;)r=q({strategyIndex:r==="elimination"?1:0,analyzeMode:!0});const a={hasSolution:G(l),hasUniqueSolution:!1,usedStrategies:Me(S,d)};if(a.hasSolution){const f=K(d,S);a.difficulty=f.difficulty,a.score=f.score}const p=k();d=n.slice(),l=o,n=d.slice(),o=JSON.parse(JSON.stringify(l));let m=[...k()];for(;m&&!m.every(Boolean);)m=Z({analyzeMode:!0,iterationCount:0});return a.hasSolution&&typeof m!="boolean"&&(a.hasUniqueSolution=m&&m.every((f,E)=>f===p[E])),d=n.slice(),l=o,a}function le(){Q(0);const n=JSON.parse(JSON.stringify(l));function o(){ke();const a=$();return a.hasSolution&&a.difficulty?!xe(u,a.difficulty):!0}function r(){l=n.slice()}for(;o();)r();return M(),k()}const Re=30,Z=({analyzeMode:n=!1,iterationCount:o=0}={})=>{if(o>=Re)return!1;const r=k().slice();q({analyzeMode:n});const a=k().slice(),p=r.filter(Boolean).length===a.filter(Boolean).length;return!G(l)&&p?Z({analyzeMode:n,iterationCount:o+1}):(l=oe(a),M(),k())},we=()=>{let n=!0;for(;n;)n=q({strategyIndex:n==="elimination"?1:0});return k()},k=()=>l.map(n=>n.value);return s?(l=oe(s),M(),$()):(A(),le()),{solveAll:we,solveStep:Z,analyzeBoard:$,getBoard:k,generateBoard:le}}function qe(e){const{getBoard:t}=ie({difficulty:e});return t()}function $e(e){const t=[],{solveAll:i,analyzeBoard:c}=ie({initBoard:e,onUpdate:l=>t.push(l)}),s=c();if(!s.hasSolution)return{solved:!1,error:"No solution for provided board!"};const u=i();return s.hasUniqueSolution?{solved:!0,board:u,steps:t,analysis:s}:{solved:!0,board:u,steps:t,analysis:s,error:"No unique solution for provided board!"}}const ae=e=>{const i=Math.floor(e*10),c=10-i;console.log(`${"🔴".repeat(i)}${"⭕️".repeat(c)}`)},ce="sudoku",je=e=>{if(e.quantity.some(u=>u.amoutnOfSudokus<=0)){const u="Invalid Input! Please use values higher than 0";throw alert(u),new Error(u)}const i=e.quantity.reduce((u,l,d)=>(u.push(u[d]+l.amoutnOfSudokus),u),[0]);i.shift();const c=e.quantity.map(u=>u.difficulty);return u=>{let l=0;for(;l+1<i.length&&u>i[l];)l++;return c[l]}},Xe=(e,t)=>{const i=e.quantity.reduce((l,d)=>l+d.amoutnOfSudokus,0),c=je(e),s=[],u=l=>{if(l>i)return localStorage.setItem(ce,JSON.stringify(s));const d=c(l),g=qe(d),S=$e(g);if(!S.board)throw new Error("Unsolvable sudoku");const A={number:l,difficulty:d,unsolved:g,solved:S.board};s.push(A);const O=l/i;(t??ae)(O),setTimeout(()=>u(l+1),0)};u(1)},Ge=()=>JSON.parse(localStorage.getItem(ce)||"[]"),Je=(e,t)=>Math.floor((e-1)/t)+1,ze=(e,t)=>{const i=[],c=Je(e.length,t);for(let s=0;s<c;s++){const u=t*s,l=t*(s+1)-1,d=[];for(let g=u;g<=l;g++)g<e.length&&d.push(e[g]);i.push(d)}return i},We=(e,t)=>{rt(t,c=>e.append(c));const i=ze(t,6);lt(i,c=>e.append(c))},Qe=e=>e.innerHTML="";var v={};Object.defineProperty(v,"__esModule",{value:!0});v.FILL_CELL=v.REMOVE_CANDIDATES=v.SOLVE_MODE_ALL=v.SOLVE_MODE_STEP=me=v.DIFFICULTY_MASTER=pe=v.DIFFICULTY_EXPERT=fe=v.DIFFICULTY_HARD=de=v.DIFFICULTY_MEDIUM=ue=v.DIFFICULTY_EASY=v.NULL_CANDIDATE_LIST=v.CANDIDATES=v.BOARD_NUMBERS=v.BOARD_SIZE=void 0;v.BOARD_SIZE=9;v.BOARD_NUMBERS=[1,2,3,4,5,6,7,8,9];v.CANDIDATES=[1,2,3,4,5,6,7,8,9];v.NULL_CANDIDATE_LIST=new Array(9).fill(null);var ue=v.DIFFICULTY_EASY="easy",de=v.DIFFICULTY_MEDIUM="medium",fe=v.DIFFICULTY_HARD="hard",pe=v.DIFFICULTY_EXPERT="expert",me=v.DIFFICULTY_MASTER="master";v.SOLVE_MODE_STEP="step";v.SOLVE_MODE_ALL="all";v.REMOVE_CANDIDATES="REMOVE_CANDIDATES";v.FILL_CELL="FILL_CELL";const Ze=[ue,de,fe,pe,me],se=e=>{const t=document.createElement("div");t.className="diff-control";const i=document.createElement("label");i.className="label",i.innerText=e!=null&&e.label?e.label:"◾️",t.append(i);const c=document.createElement("select");for(const l of Ze){const d=new Option(l,l);c.append(d)}t.append(c);const s=document.createElement("input");s.type="number",s.value="1",s.min="1",t.append(s);const u=document.createElement("button");return u.type="button",u.innerText="Delete",t.append(u),u.addEventListener("click",()=>t.remove()),t},Ke=()=>{const e=document.createElement("div");e.className="config";const t=document.createElement("h1");t.innerText="① Sudoku Book Generator ⑨",e.append(t);const i=()=>{const l={quantity:[]};return e.childNodes.forEach(d=>{if(d instanceof HTMLElement&&d.classList.contains("diff-control")){const g={difficulty:"easy",amoutnOfSudokus:0},S=d.querySelector("select");S&&(g.difficulty=S.value);const A=d.querySelector("input");A&&(g.amoutnOfSudokus=+A.value),l.quantity.push(g)}}),l},c=se();e.append(c);const s=document.createElement("button");s.innerText="New Difficulty";const u=()=>{const l=se();e.insertBefore(l,s)};return s.addEventListener("click",u),e.append(s),[e,i]},et=(e,t)=>{const i=document.createElement("div"),c=document.createElement("button");c.innerText="Generate";const s=document.createElement("button");s.innerText="Export";const[u,l]=it();i.append(c),i.append(s),i.append(u);const d=()=>{Qe(e);const S=Ge();We(e,S),window.print()},g=()=>{const S=t();Xe(S,l)};return c.addEventListener("click",g),s.addEventListener("click",d),i},tt=e=>{const t=document.createElement("li");return t.innerText=e,t},nt=()=>{let e=!1;const t=document.createElement("div");t.className="instruction";const i=document.createElement("button");i.innerText="How to use?";const c=document.createElement("ul");c.className="d-none",["Set the difficulty and the number of sudokus for each difficulty, using the select and number input.","The output puzzles will keep the order in which they were defined.","The generate CTA generates and stores the puzzles in the localStorage.","The generate process may take some as the puzzles are being generated and solved.","The export CTA generates a pdf file based on the puzzles stored in the localStorage.","The generate CTA should be called before the export CTA (💩-UX)."].map(tt).forEach(u=>c.append(u)),t.append(i),t.append(c);const s=()=>{e=!e,c.className=e?"":"d-none",i.className=e?"active":""};return i.addEventListener("click",s),t},ot=e=>{if(e.length>9)throw new Error("Trying to render more than 9 solutions in solution page");const t=document.createElement("div");t.className="solution-page break";const i=document.createElement("h1");i.innerText="Soluciones",t.append(i);const c=document.createElement("div");c.className="solution-bundle",t.append(c);for(let s=0;s<e.length;s++){const{solved:u,number:l}=e[s],d=document.createElement("div");d.className="solution-card";const g=document.createElement("h2");g.innerText=`#${l}`,d.append(g);const S=re(u);d.append(S),c.append(d)}return t},he=(e,t,i)=>{if(e>=t.length)return;const c=t[e],s=ot(c);i(s),setTimeout(()=>he(e+1,t,i),0)},lt=(e,t)=>he(0,e,t),st=(e,t)=>{const{number:i,difficulty:c}=e,s=document.createElement("div");s.className=`sudoku${t!=null&&t.classNames?t.classNames.reduce((d,g)=>d+` ${g}`,""):""}`;const u=document.createElement("h1");u.innerText=`${i}: ${c==="easy"?"Fácil":c==="medium"?"Media":c==="hard"?"Difícil":c==="expert"?"Experto":c==="master"?"Maestro":"Indefinido"}`,s.append(u);const l=re(e.unsolved);return s.append(l),s},ge=(e,t,i)=>{if(e>=t.length)return;ae((e+1)/t.length);const c=t[e],s=st(c,{classNames:["break"]});i(s),ge(e+1,t,i)},rt=(e,t)=>ge(0,e,t),it=()=>{const t=document.createElement("progress");return t.className="progress-bar",t.value=0,t.max=100,[t,c=>{const s=Math.max(0,Math.min(c,1));t.value=s*100}]},Ee=document.querySelector("div#ui");if(!Ee)throw new Error("UI div is null!");const ne=document.querySelector("div#control");if(!ne)throw new Error("Control div is null!");const ve=document.querySelector("div#app");if(!ve)throw new Error("App div is null!");const[at,ct]=Ke();Ee.append(at);const ut=et(ve,ct);ne.append(ut);const dt=nt();ne.append(dt);
